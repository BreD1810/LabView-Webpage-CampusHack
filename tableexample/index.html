<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" media="screen" href="/stylesheet.css" />
    <link rel="icon" href="/img/favicon.ico">
    <script src="/js/jquery.min.js"></script>
    <script src="/js/scripts.js"></script>
    <title>Lab View</title>
    <script>
    
function getTable(){
        $.ajax({
            type: "GET",
            url: "http://labview.me:8080/LabView/clientlist",
            data: {labNumber: "Lab1"},
            success: function(data){
                var computers = data.split("\n");
                console.log(data);
                updateVisuals(computers);
                setTimeout(function(){
                    getTable();
                }, 60000);
            },
            error: function(){
                alert("fail");
            }
        });

    }
function updateVisuals(computers){
    for(let i = 0; i < computers.length-1; i++){
        var compStats = computers[i].split(",");
	if(compStats[1] == 1){
	    document.getElementById(compStats[0]).style.backgroundColor = "green";
	} else {
	    document.getElementById(compStats[0]).style.backgroundColor = "red";
	}
    }
}
getTable();
    </script>
</head>

<body>
    <div id="Main" class="main">
        <div style="border: solid 21px; width: 500px; height: 300px; display: grid; grid-template-columns: auto  auto; grid-gap: 50px;">
		<div id="DOODLEBUG" style="margin-left: 50px; margin-top: 25px; width: 100px; height: 100px; background-color: red;">
			<p style="text-align: center;">Sam</p>
		</div>
		<div id="JOELTPARKO-PRO" style="margin-top: 25px; width: 100px; height: 100px; background-color: red;">
			<p style="text-align: center;">Joel</p>
                </div>
		<div id="BRADS-LAPTOP" style="margin-left: 50px; width: 100px; height: 100px; background-color: red;">
			<p style="text-align: center;">Brad</p>
                </div>
		<div id="DESKTOP-5HBHD9D" style="width: 100px; height: 100px; background-color: red;">
			<p style="text-align: center;">Ankur</p>
                </div>
	</div>
    </div>

</body>

</html>
